



1.1全球最大互联网络什么是Internet

ISP网络

+ 计算设备
	+ 主机
+ 通信链路
+ 分组交换
	+ 路由器
	+ 交换机



什么是网络协议（network protocol）

规定交换信息的处理

语法（Syntax）

+ 结构格式
+ 信号电平

语义（Semantics）

+ 发出控制信息
+ 响应

+ 差错控制

时序

+ 时间顺序
+ 速度匹配

```
eg.TCP IP HTTP Skype 802.11
```

 



Internet协议标准

+ RFC： Request for Comments
+ IETF：互联网工程任务组（Internet Engineering Task Force）



1.2计算机网络结构

网络边缘

+ 主机（端系统）
	+ 位于“边缘“
	+ 运行网络应用程序：Web  email
+ 客户/服务器应用（client / sever）
	+ Web应用，文件传输FTP应用

+ 对等应用模型（peer to peer,P2P）
	+ 不依赖专用服务器

+ 网络应用

接入网络，物理介质

+ 带宽（bandwidth/bps）,独占/共享

	+ 住宅

	+ 机构

	+ 移动

+ 数字用户线路（DSL）

	+ 电话线链接中心局的DSLAM

+ 电缆网络

	+ 频分多路复用
	+ HFC：混合光纤同轴电缆（hybrid fiber coax）
		+ 非对称(传输速度)
	+ 各家庭通过电缆网络，

无线接入网络

+ 无线局域网（LANs）
+ 广域无线接入



1.3网络核心

+ 互联路由器网络（
+ 路由+转发
	+ 路由（routing）：
		+ 路由算法确定从源到目的的传输路径
	+ 转发（forwarding）：
		+ 将分组从路由器输入端口交换至正确的输出端口

Internet结构：网络之网

+ 端系统通过 *接入ISP* 连接到 Internet
+ 将每个*接入ISP* 连接到国家或全球ISP（商业角度，多个ISP竞争）
	+ 竞争ISP互联（对等peering link或IXP Internet exchange point）
	+ 还有regional net



数据交换-电路交换

交换

+ 动态转接

+ 动态分配传输资源

+ 电路交换

	+ 例：电话网络，用户线--->共享中继线----> 用户线 
		+ 建立链接  ---->  通信  ---->   释放连接
		+ 独占资源
		+ 多路复用（multiplexing）：复用 通信技术中
			+ 频分多路复用分 FDM
				+ 频率带宽（Hz）
			+ 时分多路复用  TDM
				+ 时分复用帧（TDM帧）
				+ 占用时隙周期性出现
			+ 波分多路复用  WDM
				+ 实质是 光的频分复用
			+ 码分多路复用   CDM
				+ 广泛  无线链路共享 （蜂窝网，卫星通信）
				+ 每个用户分配一个唯一码分序列

+ 报文交换（message Switching）

	+ 报文：源发送信息整体
	+ 存储-转发

+ 分组交换  ( M/R  +   n*L/R )n为中间路由器数量  

	+ 分组：报文分拆
	+ 拆分与重组
	+ 产生额外开销

	+ 存储-转发（store-and-forward）
	+ 传输延迟

分组交换  vs  电路交换

+ 分组交换即用即停，电路交换独占资源，适用于突发数据传输网络
	+ 但可能会拥塞（congestion）：分组延迟，丢失

+ 电路级性能保障
	+ 音/视频需宽带保障



1.4计算机网络性能

速率（data rate / bit rate）

带宽（bandwidth  /Hz）

+ 原指信号具有频带宽度
+ 网络上指kb/s  Mb/s  GB/s  T/s

延迟 / 时延（delay / latency）

+ 传输
+ 排队的分组（等待输出链路可用 delay）
+ 丢包（路由器缓存容量满则到达分组丢弃 loss）

四种分组延迟

+ 节点处理延迟（nodal processing delay）
+ 排队延迟（queueing delay）：
	+ R：链路带宽（bps）    L：分组长度（bits）    a：平均分组到达速率
	+ 流量强度（traffic intensity）=La / R
		+ ~ 0 ：平均排队延迟很小
		+ ~ 1 ：    很大
		+ ->1 ：无限大，超出服务能力
+ 传输延迟（transmission delay）：在路由器节点处等待的时间
+ 传播延迟（propagation）：两节点间的传输时间



时延带宽积 = 传播时延 * 带宽

+ 以比特为单位的链路长度

分组丢失（丢包）

+ 丢包率 = 丢包数 / 已发包数

吞吐量 / 率（Throughput）

+ 发送端与接收端之间传送数据速率（b/s）

+ Internet场景

1.5计算机网络体系结构（network architecture）

+ 分层结构  ： 每层对应网络协议完成本层功能
	+ 参考模型 （reference model）
	+ 模块化 ：易于更新，维护
	+ 利于标准化

OSI 参考模型数据封装与传输

+ 应用层--------------------协议（端-端）----------------

	表示层--------------------协议（端-端）----------------

	对话-----------------------协议（）----------------

	传输-----------------------协议（）----------------

	网络---------------协议----网络层-----------网络

	数据链路---------协议----数据链路层-----数据链路

	物理---------------协议----物理层-----------物理

+ 增加控制信息（构造协议数据单元 PDU）
	+ 地址（Address）：标识发送端 / 接收端
	+ 差错检测编码（Error-detecting code）
	+ 协议控制（Protocol control）

物理层

+ 接口特性
	+ 机械特性，电气特性，功能特性，规程特性
+ 比特编码
+ 数据率
+ 比特同步
	+ 时钟同步 
+ 传输模式
	+ 单工（Simplex）
	+ 半双工（half-duplex）：好比对讲机
	+ 全双工（full-duplex）  

数据链路层

+ 结点-结点（node-to-node）
+ 组帧（Framing）
+ 物理寻址（Physical addressing）
+ 流量控制（Flow control）
	+ 避免淹没接收端
+ 差错控制（Error control）
	+ 检测重传丢失帧
+ 访问（接入）控制（Access control）
	+ 那一时刻那个设备拥有链路控制权

网络层

+ 源主机到目的主机数据分组（packet）交付
+ 逻辑寻址（Logical addressing）
	+ 全局唯一逻辑地址，确保数据分组被送到目的主机，如 IP地址

+ 路由（routing）
	+ 路由器或（网关）互连网络，并路由分组至最终主机
	+ 路径选择
+ 分组转发

传输层

+ 分段与重组
+ SAP寻址
	+ 完整报文提交给正确进程，如 端口号

+ 连接控制
+ 流量控制
+ 差错控制



会话层（最薄）

+ 对话控制（dialog controlling）
	+ 建立，维护
+ 同步（synchronization）
	+ 数据流中插入“同步点”

表示层

+ 数据表示转化
	+ 转换为主机独立编码
+ 加密/解密
+ 压缩/解压缩

应用层

HTTP（Web）     FTP（文件传输）      SMTP（电子邮件）协议

+ 通过代理（如浏览器）或网络接口使用网络服务

TCP/IP参考模型

+ 应用层---------HTTP  SMTP-----DNS   RTP

	运输层---------------------TCP-------UDP

	网际层----------------------------IP

	网络接口层





五层参考模型

+ 结合 OSI 和TCP / IP
	+ 应用层：FTP，SMTP，HTTP
	+ 传输层：TCP，UDP
	+ 网络层：IP协议，路由协议
	+ 链路层：以太网（Ethernet），802.1（WiFi）,PPP 
	+ 物理层：比特传输

+ 交换机（Switch）：链路，物理两层
+ 路由器（router）：网络，链路，物理三层

1.6计算机网络与Internet发展历史

2.1应用层

网络应用体系结构

客户机/服务器结构（C/S结构）

+ 服务器

	+ 24小时服务
	+ 永久性访问地址/域名
	+ 大量服务器实现可扩展性

+ 客户机

	+ 间歇性接入网络
	+ 不能使用动态IP地址
	+ 不会与其他客户机直接通信

	例：Web

P2P结构（高度可收缩，但难于管理）

+ 没有服务器
+ 端系统可直接通讯
+ 间歇性接入网络
+ 节点可能改变IP地址

混合结构

+ 文件传输 P2P结构
+ 文件搜索 C/S结构

例：Napster

网络应用进程（主机上运行的程序）通信

+ 同一主机进程

	+ 进程间通信机制
	+ 操作系统提供

+ 不同主机进程

	+ 消息交换

	套接字：socket

	+ 进程间通信利用socket发送/接受消息实现
	+ 传输基础设施向进程提供API
		+ 传输协议的选择
		+ 参数的设置

	如何寻址进程

	+ 不同主机的进程间通信，每个进程必有标识符
	+ IP地址
		+ 同一主机可存在多个进程
	+ 端口号/port number
		+ 每个需要通信的进程分配一个端口号
		+ HTTP Server：80
		+ Mail Server：25

	  进程的标识符

	+ IP地址 + 端口号

应用层协议

+ 网络应用需遵循的应用层协议
+ 公开协议
	+ 由RFC 定义
	+ 允许互操作
+ 私有协议
	+ 多数P2P文件共享应用

应用层协议内容

+ 消息的类型
	+ 请求消息
	+ 响应消息
+ 消息的语法（syntax）格式
	+ 有哪些字段（field）
	+ 字段如何描述
+ 字段的语义（semantics）
	+ 字段中信息的含义
+ 规则（rules）
	+ 进程合适发送/响应消息

网络应用服务需求

+ 数据丢失（data loss）
+ 延迟（delay）/ 时间（timing）
+ 带宽（bandwidth）

Internet提供的传输服务

+ TCP服务
	+ 面向连接
	+ 可靠传输 
	+ 流量控制
	+ 拥塞控制
	+ 不提供时间延迟保障
	+ 不提供最小带宽保障
+ UDP服务
	+ 无连接
	+ 无可靠数据传输
	+ 不提供

特定网络应用传输服务及协议

+ e-mail---------------------------------TCP
+ Web-----------------------------------TCP
+ remote terminal access——----TCP
+ Internet telephony ----------------UDP

socket编程

2.3Web应用

Web（World Wide Web）

+ 网页（Web Page）
	+ 包含多个对象（objects）
		+ HTML文件，JPEG图片，视频文件，动态脚本
		+ 基本HTML文件：包含对其他对象引用的连接
+ 网页互相连接

+ 对象寻址（addressing）

	+ URL（Uniform Resoure Locator）：统一资源定位器

	+ Scheme://host:port/path

HTTP协议概述

+ 万维网应用遵行协议
+ 超文本传输协议（HyperText Transfer Protocol）
+ C / S结构
+ 版本
	+ 1.0：RFC 1945
	+ 1.1：RFC 2068
+ 无状态（stateless）

 使用TCP传输服务

+ 服务器在80端口等待客户请求
+ 浏览器发起到服务器TCP的链接（创建套接字socket）
+ 服务器接收来自浏览器的TCP链接
+ 浏览器（HTTP客户端）与Web服务器（HTTP服务器）交换HTTP消息
+ 关闭TCP链接

2.3.2HTTP链接

两种连接 

+ 非持久性连接（Nonpersistent HTTP）
	+ 每个TCP链接最多允许传输一个对象
	+ HTTP 1.0
	+ 每个对象都要重新建立TCP连接
+ 持久性连接
	+ 允许多个
	+ HTTP 1.1 
	+ 响应后保持TCP链接
	+ 后续HTTP消息可以通过这个链接发送
	+ 
	+ 无流水的持久链接
	+ 带有流水机制的持久性连接

响应时间分析与建模

+ RTT（Round Trip Time）
+ 响应时间
	+  发起建立TCP链接，一个RTT
	+ 发送HTTP请求到响应到达，一个RTT
	+ Total=2RTT+文件发送时间

2.3.3HTTP消息格式

HTTP请求消息

+ ASCII：人可直接读
+ 通用格式

上传输入

+ POST方法
	+ 网页经常

+ URL方法
	+ 使用GET方法
	+ 输入信息通过request行的URL字段上传

+ HTTP/1.0
	+ GET
	+ POST
	+ HEAD
		+ 请Server

2.3.4 Cookie技术

HTTP协议无状态，扩展于HTTP

+ RFC6265

Cookie组件

+ 保存客户主机有浏览器管理

Cookie原理

Cookie作用

+ 身份认证
+ 购物车
+ 推荐
+ Web e-mail

2.3.5Web缓存/代理服务器技术

+ 功能
	+ 不访问服务器的前提下满足客户端HTTP请求
+ 优
	+ 缩短请求响应时间
	+ 减少流量

Web缓存/代理服务器

+ 设定浏览器通过缓存进行Web访问
+ 缓存既充当客户端，也充当服务器
+ 一般由ISP（Internet服务提供商）架设

条件GET方法

+ 目标
	+ 若缓存有最新版本，则不需要发送请求对象
+ 缓存
	+ 在HTTP请求消息中声明所持版本日期
+ 服务器
	+ 若缓存版本是最新的，则响应消息中不包含对象